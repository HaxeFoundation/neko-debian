From fe87462d9c7a6ee27e28f5be5e4fc0ac87b34574 Mon Sep 17 00:00:00 2001
From: Andy Li <andy@onthewings.net>
Date: Thu, 12 May 2016 15:56:02 +0800
Subject: [PATCH] nekotools boot -c: removed unused self variable and the
 fclose that caused sigfault

---
 src/tools/nekoboot.neko | 2 --
 1 file changed, 2 deletions(-)

Index: neko-debian/src/tools/nekoboot.neko
===================================================================
--- neko-debian.orig/src/tools/nekoboot.neko
+++ neko-debian/src/tools/nekoboot.neko
@@ -45,7 +45,6 @@ var c_src = "#include <stdio.h>
 #endif
 
 #define default_loader neko_default_loader
-static FILE *self;
 unsigned char program[] = %s;
 unsigned int program_len = %d;
 unsigned int program_pos = 0;
@@ -113,7 +112,6 @@ int neko_execute_self( neko_vm *vm, valu
 		return 1;
 	}
 	module_val = val_callEx(val_null,module_read,args3,2,&exc);
-	fclose(self);
 	if( exc != NULL ) {
 		report(vm,exc,1);
 		return 1;
